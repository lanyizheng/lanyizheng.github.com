<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="http://yandex.st/highlightjs/7.1/styles/default.min.css">
<script src="http://yandex.st/highlightjs/7.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link rel="stylesheet" href="/css/pygments.css">


# Jersey

**项目中一直在使用web service 为app提供后台服务， 采用开源框架CXF、Spring，现在打算系统学习下RESTful Web service。第一次听说RESUful当然不是在自己导师的实验室了，知识只能通过自己在外面学习到，这算是我们实验室的一个传统吧。**

**感谢 *韩陆*《java restful web services 实战》一书**

##Jersey 模块

- 核心模块

包括通用包、服务器实现、客户端实现3个子模块，是使用Jersey必须的依赖。即jersey-client，jersey-server，jersey-common。

| 模块名称   | 模块说明   | 源代码对应的目录

| :------:     | :------:     | :------:

|jersey-client |Jersey核心客户端实现 |core-client

|jersey-common |Jersey通用包 |core-common

|jersey-server |Jersey核心服务器实现 |core-server

- 容器模块

Jersey提供了3种对应于外部容器的HTTP容器，分别是Grizzly 2、JDK-HTTP和 SIMPLE-HTTP，Grizzly 2同时提供了Servlet容器。对于Servlet的实现，Jersey提供了对

Servlet 2.x和Servlet 3.x两个版本的实现。



| 模块名称   | 模块说明   | 源代码对应的目录

| :------:     | :------:     | :------:

|jersey-container-grizzly2-http |Grizzly 2版HTTP容器 | containers/grizzly2-http 

|jersey-container-grizzly2-servlet |Grizzly 2版Servlet容器 |containers/ grizzly2-servlet

|jersey-container-jdk-http |JDK版HTTP容器 |containers/ jdk-http

|jersey-container-servlet |Jersey核心Servlet 3.x实现 |containers/ jersey-servlet

|jersey-container-servlet-core |Jersey核心Servlet 2.x实现 |containers/ jersey-servlet-core

|jersey-container-simple-http |简单版HTTP容器 |containers/simple-http





- 连接器模块

Jersey客户端底层依赖连接器实现网络通信，如果标准的客户端模块1法实现功能需求，可以考虑引入Grizzly连接器或者Apache连接器。

| 模块名称   | 模块说明   | 源代码对应的目录

| :------:     | :------:     | :------:

|jersey-grizzly-connector|Jersey客户端Grizzly连接器|connectors/grizzly-connector

|jersey-apache-connector|Jersey客户端Apache连接器|connectors/apache-connector





- Media模块

Jersey Media模块是支持Jersey处理传输数据媒体类型的模块。该模块提供了4种处理JSON的方式，分别是Jackson、Jettison、MOXy和JSON-P。另外，Multipart包用于对Form表单的支持，SSE用于对Server Sent Events支持。

| 模块名称   | 模块说明   | 源代码对应的目录

| :------:     | :------:     | :------:

|jersey-media-json-jackson |Jersey JSON Jackson包 | media/json-jackson

|jersey-media-json-jettison |Jersey JSON Jettison包 | media/json-jettison

|jersey-media-json-processing |Jersey JSON-P（JSR 353）包 | media/json-processing

|jersey-media-moxy |Jersey JSON EclipseLink MOXy包 |media/moxy

|jersey-media-multipart |Jersey Multipart支持包 |media/multipart

|jersey-media-sse |Jersey Server Sent Events支持包 |media/sse





- 扩展模块

Jersey生态环境中包含了许多JAX-RS2.0标准之外的功能，比如MVC、Bean验证等辅助REST实现的模块，还有像Spring支持包这样的对第三方框架支持的模块。



**以上内容摘自 韩陆 《java restful web services 实战》书中第一章**



## Jersey快速实现

新建一个目录，在该目录下执行maven命令：

件的方式获得。如果REST服务没有自定义Application的子类，容器将默认生成一个javax.ws.rs.core.Application 类。



![Alt text](./REST服务类型示意图.png)



- 当服务中没有Application子类时，容器会查找Servlet的子类来做入口，如果Servlet的子类也不存在，则REST服务类型为类型一，对应图中的例1。

- 当服务中没有Application子类，但存在Servlet的子类时，则REST服务类型为类型二，对应图中的例2。

- 服务中定义了Application的子类，而且这个Application的子类使用了@ApplicationPath 注解，则REST 服务类型为类型三，对应图中的例3。

- 如果服务中定义了Application 的子类，但是这个Application 的子类没有使用

@ApplicationPath 注解，则REST 服务类型为类型四，对应图中的例4。









- 使用Grizzly 2 HTTP server container 



件的方式获得。如果REST服务没有自定义Application的子类，容器将默认生成一个javax.ws.rs.core.Application 类。



![Alt text](/images/REST服务类型示意图.png)



- 当服务中没有Application子类时，容器会查找Servlet的子类来做入口，如果Servlet的子类也不存在，则REST服务类型为类型一，对应图中的例1。

- 当服务中没有Application子类，但存在Servlet的子类时，则REST服务类型为类型二，对应图中的例2。

- 服务中定义了Application的子类，而且这个Application的子类使用了@ApplicationPath 注解，则REST 服务类型为类型三，对应图中的例3。

- 如果服务中定义了Application 的子类，但是这个Application 的子类没有使用

@ApplicationPath 注解，则REST 服务类型为类型四，对应图中的例4。

```
mvn archetype:generate -DarchetypeGroupId=org.glassfish.jersey.archetypes  -DarchetypeArtifactId=jersey-quickstart-grizzly2 -DarchetypeVersion=2.15

```

- 使用 Servlet container部署


```
mvn archetype:generate -DarchetypeGroupId=org.glassfish.jersey.archetypes    -DarchetypeArtifactId=jersey-quickstart-webapp -DarchetypeVersion=2.15
```

- 我这种新手就采用官网给出的方法，采用Grizzly容器：



```
mvn archetype:generate -DarchetypeArtifactId=jersey-quickstart-grizzly2 -DarchetypeGroupId=org.glassfish.jersey.archetypes -DinteractiveMode=false -DgroupId=com.example -DartifactId=simple-service -Dpackage=com.example -DarchetypeVersion=2.15
```

---

## Servlet 容器服务

- 创建一个可以打包成war，能运行在Servlet容器上的服务，官网给出的方法：

```

mvn archetype:generate -DarchetypeArtifactId=jersey-quickstart-webapp -DarchetypeGroupId=org.glassfish.jersey.archetypes -DinteractiveMode=false -DgroupId=com.example -DartifactId=simple-service-webapp -Dpackage=com.example -DarchetypeVersion=2.16
```

## REST服务类型

在REST服务中，资源类是接收REST请求并完成响应的核心类，而资源类是由REST服务的“提供者”来调度的，REST中的这个提供者，即JAX-RS 2.0 中定义的Application 以及Servlet。

作为应用的入口，Application需要知道具体的资源
